{% extends 'base.html.twig' %}

{% block title %}User
{% endblock %}

{% block javascripts %}
	<script>
		function animNote($n){
			let btPencil = document.querySelector('.bt-note-pencil');
			let btClose = document.querySelector('.bt-note-close');
			let noteTxt = document.querySelector('.note-txt');
			let noteForm = document.querySelector('.note-form');

			if($n == 'pencil'){
				btClose.classList.add("active");
				noteForm.classList.add("active");
				btPencil.classList.remove("active");
				noteTxt.classList.remove("active");
			}else{
				btClose.classList.remove("active");
				noteForm.classList.remove("active");
				btPencil.classList.add("active");
				noteTxt.classList.add("active");
			}
		}
	</script>
{% endblock %}

{% block main %}

	<section class="admin">
		<div class="col1">
			<nav class="admin-nav">
				{% include "partial/_menuBackstage.html.twig" %}
			</nav>
			<div class="info">
				{% if is_granted("ROLE_ADMIN") == true %}
					<p class="readmore">Je suis admin</p>
				{% elseif is_granted("ROLE_TEACHER") == true %}
					<p class="readmore">Je suis le professeur</p>
				{% elseif is_granted("ROLE_STUDENT") == true %}
					<p class="readmore">Bienvenue sur votre espace d'administration, vous êtes enregistré comme élève.</p>
				{% elseif is_granted("ROLE_USER") == true %}
					<p class="readmore">Merci de vous être enregistré.</p>
					<p class="readmore">Mais pour avoir accès à toutes les fonctions et notamment réserver des cours vous devez confirmer votre adresse mail.</p>
					<p class="readmore">Si vous n'avez pas reçu le mail lors de votre inscription vous pouvez renvoyer la demande avec le bouton ci-dessous.</p>
					<a class="bt" href="{{ path('app_emailvalid', {'user': user.id}) }}">Envoyer un mail</a>
				{% endif %}


			</div>
		</div>
		<div class="col2">
			<div class="title">
				<h3>{{ user.firstname }}
					{{ user.lastname }}</h3>
			</div>
			<div class="admin-panel">

				<section>
					<p>Enregistré le {{ user.addedDate ? user.addedDate|date('d/m/Y') : '' }}, 
                    mis à jour le {{ user.addedDate ? user.updateDate|date('d/m/Y') : '' }}</p>
				</section>

				<section>
                <table class="tab2col">
                            <tr>
                                <td>Email :</td>
                                <td><a href="mailto:{{ user.email }}">{{ user.email }}</a></td>
                                <td></td>
                            </tr>
                            <tr>
                                <td>Téléphone :</td>
                                <td>{{ user.phone }}</td>
                                <td></td>
                            </tr>
                            <tr>
                                <td>Anniversaire :</td>
                                <td>{{ user.birthday }}</td>
                                <td></td>
                            </tr>
                            <tr>
                                <td>Niveau :</td>
                                <td>{{ user.level }}</td>
                                <td></td>
                            </tr>
                            <tr>
                                <td>Années de pratique :</td>
                                <td>{{ user.yearsPlaying }}</td>
                                <td></td>
                            </tr>
                            <tr>
                                <td>Autre instrument :</td>
                                <td>{{ user.otherInstrument }}</td>
                                <td></td>
                            </tr>
                            <tr>
                                <td>Info supplémentaire :</td>
                                <td>{{ user.comment }}</td>
                                <td></td>
                            </tr>
                        </table>
				</section>

                <section class="line-top">
                	<h4>Note</h4>
					<a onclick="animNote('pencil')" class="bt-note-pencil active">
						<svg class="">
							<title>Éditer</title>
							<use xlink:href="/img/icons.svg#pencil"></use>
						</svg>
					</a>
					<a onclick="animNote('close')" class="bt-note-close">
						<svg class="">
							<title>Éditer</title>
							<use xlink:href="/img/icons.svg#cross"></use>
						</svg>
					</a>
					<div class="note-txt note active">
						{{ user.note|raw }}
					</div>
					<div class="note-form">
						{{ include('user/_form_note.html.twig') }}
					</div>
					
						
                </section>

                <section class="line-top">
                <h4>Cours</h4>
                </section>

                <section class="line-top">
                <h4>Documents</h4>
                </section>

				<section class="boutons">

					<a class="bt-form" href="{{ path('user_edit', {'id': user.id}) }}">Modifier</a>
				</section>


			</div>
		</div>
	</section>


	{# <table class="table">
	        <tbody>
	            <tr>
	                <th>Roles</th>
	                <td>{{ user.roles ? user.roles|json_encode : '' }}</td>
	            </tr>
	           
	           
	            <tr>
	                <th>Added_date</th>
	                <td>{{ user.addedDate ? user.addedDate|date('Y-m-d H:i:s') : '' }}</td>
	            </tr>
	            <tr>
	                <th>Update_date</th>
	                <td>{{ user.updateDate ? user.updateDate|date('Y-m-d H:i:s') : '' }}</td>
	            </tr>
	            <tr>
	                <th>IsVerified</th>
	                <td>{{ user.isVerified ? 'Yes' : 'No' }}</td>
	            </tr>
	            
	            <tr>
	                <th>AgreeTerms</th>
	                <td>{{ user.agreeTerms ? 'Yes' : 'No' }}</td>
	            </tr>
	        </tbody>
	    </table> #}


{% endblock %}
